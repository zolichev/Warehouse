# Warehouse
Warehouse WebApi REST service.

### Запуск сервиса
Клонировать или скачать репозиторий https://github.com/zolichev/Warehouse. Открыть Warehouse.sln в Visual Studio 2017. 
Провести сборку решения и запустить решение, стартовый проект Warehouse.WebApi. Убедится что открыт адрес http://localhost:51205/swagger/ui/index.

Дополнительно, запущенное приложение можно увидеть в облаке  - https://warehousewebapiservice.azurewebsites.net/swagger/ui/index

В приложении установлен swagger который позволяет видеть доступные веб сервисы и запускать их.

Для запуска запросов требующих аутентификации запросов используйте встроеного пользователя "test"/"" (пароль пустой), либо создайте нового с помощью метода: 
"post  /api/store/Clients  Register new client"

### Доступные запросы

Wares / Товары

* "get  /api/store/Wares  Get all wares in store" Получить список всех товаров на складе
* "get  /api/store/Wares/{id}  Get ware by id." Получить параметры товара по идентификатору
* "post  /api/store/Wares  Add new ware in store" Добавить новый товар на склад
* "delete  /api/store/Wares/{id}  Remove ware from store" Взять товар со скалада по идентификатору
* "delete  /api/store/Wares  Remove first expired ware from store" Взять товар, с самой ранней датой годности, со склада по указанному названию товара

Clients / Клиенты (пользователи)

* "get  /api/store/Clients  Get current client." Получение информации по текущему клиенту
* "post  /api/store/Clients  Register new client" Регистрация нового клиента
* "put  /api/store/Clients  Update notifiable property of current client" Установка нового значения требования нотифицирования клиента

Notifications / Уведомления

* "get  /api/store/Notifications  Get all notifications." Получить все уведомления для текущего клиента
* "get  /api/store/Notifications/{id}  Get notification by id." Получить параметры уведомления по идентификатору
* "delete  /api/store/Notifications/{id}  View and remove notification from client" Получить параметры уведомления по идентификатору и пометить его просмотренным
* "post  /api/store/Notifications  View and make viewed next notification from client"  Получить параметры следующего в очереди непросмотренного уведомления и пометить его просмотренным
* "delete  /api/store/Notifications  View and make viewed all notifications from client" Получить все непросмотренные уведомления и пометить их просмотренными

### Архитектура приложения

Приложение состоит из нескольких проектов каждый из которых отвечает за свой архитектурный слой.

* Warehouse.Model. Модель приложения. Определение основных сущностей приложения. Состоит из разделов: Wares (Товары, хранение), Clients (Клиенты), Notifications (Уведомления). В каждом разделе описана предметная модель приложения в этой области. В этом слое нет активной функциональности, допускается функциональность по созданию и приведению типов модели.

* Warehouse.Storage. Хранение данных приложения. Состоит из разделов: Wares (Товары, хранение), Clients (Клиенты), Notifications (Уведомления) и общего раздела.Используется Entity Framework 6 Code First на локальной БД указанной в конфигурационном файле. Так же определены интерфейсы хранилищ данных для возможности замены функциональности хранения.

* Warehouse.Service. Основной функционал приложения, бизнес логика и инфраструктура. Состоит из разделов: Wares (Товары, хранение), Clients (Клиенты), Notifications (Уведомления) в каждом из которых реализован функционал относящийся только к разделу. Подготовлен к разделу на микросервисы. Входящая точка класс ServiceManager который через внедрение зависимостей получает доступ к хранению данных для дальнейшего использования в сервисах приложения.

* Warehouse.Service.Tests. Юнит тесты для слоя сервисов. Своя реализация хранения данных. Данные хранятся в памяти. Такая реализация позволяет очистить хранилище и заполнить его тестовыми данными перед каждым тестом. Через иньекцию зависимостей тестовые хранилища передаются в слой сервисов и приложение работает с хранилищем в памяти.

* Warehouse.WebApi. REST веб сервис приложения. Используется базовая аутентификация клиентов. Все запросы, кроме регистрации клиента, защищены проверкой аутентификации. Подключен CORS для возможности использования запросов со сторонних серверов. Подключен Swagger для вывода документации по сервисам и SwaggerUI для возможности наглядного просмотра документации по сервисам и тестовым запускам сервисов.

### Допущения и предположения по развитию

Практически не реализована валидация входящих данных. Реализовать полноценную валидацию.

Хранилище следует перенести в полноценную БД.

В промышленном приложении базовую аутентификацию следует заменить на аутентификацию по токену с поддержкой протокола OAuth2 как более защищенную и удобную.

Не реализована авторизация для запросов. Следует определить уровни доступов, роли пользователей и реализовать авторизаци.

Не производилась проверка производительности приложения. Следует протестировать приложение на большой загрузке и оптимизировать "узкие" места с помощью профилировщика.

Не реализован UI приложения. В текущей архитектуре допускает реализацию UI как веб приложения, дестопного, моюильного и многих других типов приложений.